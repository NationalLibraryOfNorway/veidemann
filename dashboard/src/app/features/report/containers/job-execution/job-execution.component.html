@if (ability$ | async; as ability) {
  @if (query$ | async; as query) {
    <div class="container">
      @if (loading$ | async) {
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      }
      <div fxLayout="row" class="container no-scroll">
        <app-job-execution-status-query class="content-padding scroll"
          [crawlJobOptions]="crawlJobOptions"
          [query]="query"
        (queryChange)="onQueryChange($event)"></app-job-execution-status-query>
        <app-job-execution-status-list fxFlex
          appQueryJobExecutionStatus [query]="query"
          [pageIndex]="pageIndex$ | async"
          [pageSize]="pageSize$ | async"
          [sortDirection]="sortDirection$ | async"
          [sortActive]="sortActive$ | async"
          (sort)="onSort($event)"
          (page)="onPage($event)">
          <ng-container *appShortcut="let row">
            @if (ability.can('read', Kind[Kind.CRAWLJOB])) {
              <a mat-menu-item
                [routerLink]="['/config', 'crawljobs', row.jobId]"
                i18n="@@reportListActionButtonGoToCrawljob">
            <mat-icon>work</mat-icon>
            Go to crawljob
          </a>
            }
          </ng-container>
          <ng-container *appFilter="let row">
            @if (ability.can('read', 'crawlexecution')) {
              <a mat-menu-item
                [routerLink]="['/report', 'crawlexecution']"
                [queryParams]="{job_id: row.jobId, job_execution_id: row.id}"
                i18n="@@reportListActionButtonGoToCrawlExecution">
            <mat-icon>hdr_weak</mat-icon>
            Go to crawl execution
          </a>
            }
          </ng-container>
          <ng-container *appAction="let row">
            @if (ability.can('read', 'jobexecution')) {
              <a mat-menu-item
                [routerLink]="['../jobexecution', row.id]"
                i18n="@@reportListActionButtonShowFullReport">
            <mat-icon>keyboard_arrow_right</mat-icon>
            Show full report
          </a>
            }
            @if (row.state === JobExecutionState.RUNNING) {
              @if (ability.can('abort', 'jobexecution')) {
                <a mat-menu-item
                  (click)="onAbortJobExecution(row)"
                  i18n="@@reportListActionButtonAbortCrawlExecution">
              <mat-icon>cancel</mat-icon>
              Abort crawl
            </a>
              }
            }
          </ng-container>
        </app-job-execution-status-list>
      </div>
    </div>
  }
}
